!function(){"use strict";angular.module("myComponent.version",[]).value("version","0.4"),angular.module("myComponent.version").directive("appVersion",["version",function(e){return function(s,o){o.text(e)}}]),angular.module("directive.chat",["firebase","ngStorage"]).service("$chat",function(e,s,o,t,r,n){var i=this;i.$storage=n;var a,c=null;i.setRoom=function(e){var r=s.defer();r.notify("About to get "+e+".");var n=new Firebase("https://uverse-social.firebaseio.com/chat/rooms/"+e);return i.room=i.$storage[e],o(n).$loaded().then(function(s){i.room=s,void 0===s.name?(s.name=e,s.messages={},s.users={},s.childRooms={},s.$save().then(function(){i.messages=t(n.child("messages")),a=t(n.child("users")),c=t(n.child("childRooms")),r.resolve(i)},function(s){r.reject("Failed new room: "+e+" for reason: "+s)})):(i.messages=t(n.child("messages")),a=t(n.child("users")),c=t(n.child("childRooms")),r.resolve(i))},function(s){r.reject("Failed getting existing room: "+e+" for reason: "+s)}),r.promise},i.sendMessage=function(s){if("/"===s.substring(0,1)){if("/video"===s.substring(0,6))return s="",{video:s.substring(7)}}else{var o=(new Date).toLocaleTimeString().replace(/:\d+ /," "),t={message:s,usericon:r.user.icon,date:o,userid:r.user.name};e.log("addMessage:"+t),i.messages.$add(t).then(function(o){e.log("addedMessage:"+o),s=""},function(s){e.warn("Failed save new user: "+r.user.name+" for reason: "+s)})}}}).directive("chatlist",function(){return{restrict:"E",priority:-100,templateUrl:"components/chat/message-list.html",scope:{msg:"=messages"}}}).directive("people-list",function(){return{restrict:"E",priority:-100,templateUrl:"components/chat/people-list.html"}})}();