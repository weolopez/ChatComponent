!function(){"use strict";angular.module("myComponent.version",[]).value("version","0.5"),angular.module("myComponent.version").directive("appVersion",["version",function(e){return function(s,o){o.text(e)}}]),angular.module("directive.chat",["firebase","ngStorage"]).service("$chat",function(e,s,o,t,n,r){var i=this;i.$storage=r;var a,c=null;i.setRoom=function(e){var n=s.defer();n.notify("About to get "+e+".");var r=new Firebase("https://uverse-social.firebaseio.com/chat/rooms/"+e);return i.room=i.$storage[e],o(r).$loaded().then(function(s){i.room=s,void 0===s.name?(s.name=e,s.messages={},s.users={},s.childRooms={},s.$save().then(function(){i.messages=t(r.child("messages")),a=t(r.child("users")),c=t(r.child("childRooms")),n.resolve(i)},function(s){n.reject("Failed new room: "+e+" for reason: "+s)})):(i.messages=t(r.child("messages")),a=t(r.child("users")),c=t(r.child("childRooms")),n.resolve(i))},function(s){n.reject("Failed getting existing room: "+e+" for reason: "+s)}),n.promise},i.sendMessage=function(s){if("/"===s.substring(0,1)){if("/video"===s.substring(0,6))return s="",{video:s.substring(7)}}else{var o=(new Date).toLocaleTimeString().replace(/:\d+ /," "),t={message:s,usericon:n.user.icon,date:o,userid:n.user.name};e.log("addMessage:"+t),i.messages.$add(t).then(function(o){e.log("addedMessage:"+o),s=""},function(s){e.warn("Failed save new user: "+n.user.name+" for reason: "+s)})}}}).directive("chatlist",function(){return{restrict:"E",priority:-100,templateUrl:"bower_components/chat-component/dist/chat/message-list.html",scope:{msg:"=messages"}}}).directive("people-list",function(){return{restrict:"E",priority:-100,templateUrl:"bower_components/chat-component/dist/chat/people-list.html"}})}();